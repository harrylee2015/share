# MySQL数据库深入学习

## 目标

  熟悉 SQL 查询优化，事务和锁，MySQL 集群和高可用技术，分布式数据库架构等。尤其要注重于查询优化。
  
## 基本概念

  ### 事务及ACID特性
  
  
   事务是指作为单个逻辑工作单元执行的一系列操作，这些操作要么全做，要么全不做，是一个不可分割的工作单元。

   一个逻辑工作单元要成为事务，在关系型数据库管理系统中，必须满足 4 个特性，即所谓的 ACID：原子性、一致性、隔离性和持久性。

   * 一致性：事务开始之前和事务结束之后，数据库的完整性限制未被破坏。

   * 原子性：事务的所有操作，要么全部完成，要么全部不完成，不会结束在某个中间环节。

   * 持久性：事务完成之后，事务所做的修改进行持久化保存，不会丢失。

   * 隔离性：当多个事务并发访问数据库中的同一数据时，所表现出来的相互关系。
     
  
  ### MySQL事务隔离级别
  
   MySQL中InnoDB存储引擎 支持的隔离性有 4 种，隔离性从低到高分别为：读未提交、读提交、可重复读、可串行化。

   * 读未提交（RU，Read Uncommitted）。它能读到一个事务的中间过程，违背了 ACID 特性，存在脏读的问题，所以基本不会用到，可以忽略。

   * 读提交（RC，Read Committed）。它表示如果其他事务已经提交，那么我们就可以看到，这也是一种最普遍适用的级别。但由于一些历史原因，可能 RC 在生产环境中用的并不多。

   * 可重复读（RR，Repeatable Read），是目前被使用得最多的一种级别。其特点是有 Gap 锁、目前还是默认的级别、在这种级别下会经常发生死锁、低并发等问题。

   * 可串行化（serializable)，这种实现方式，其实已经并不是多版本了，又回到了单版本的状态，因为它所有的实现都是通过锁来实现的。
   
   
   ### 集群架构设计，主要遵从几个维度：
   
   1. 可用性
       
       站点高可用，冗余站点
       
       服务高可用，冗余服务
       
       数据高可用，冗余数据
   
   2. 扩展性
   
      读写扩展： 主从模式 + 读写分离
      
      存储扩展： 分库分表，写扩展
  
   
   隔离级别|脏读|不可重复读|幻读
   ------|-----|-------|---
   未提交读|可能|可能|可能
   已提交读|不可能|可能|可能
   可重复读|不可能|不可能|可能
   可串行化|不可能|不可能|不可能
  

## 问题

#### MySQL中日志文件有几种

   1. 重做日志（redo log)
   
   2. 回滚日志（undo log)
   
   3. 二进制日志（bin log）
 
   4. 错误日志 （err log)
    
   5. 慢查询日志（slow query log)
   
   6. 一般查询日志 （general log)
   
   7. 中继日志（relay log)

  
## 参考资料

   [MySQL教程](http://c.biancheng.net/view/7098.html)
  
