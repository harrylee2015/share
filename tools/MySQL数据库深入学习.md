# MySQL数据库深入学习

<!-- TOC -->

- [MySQL数据库深入学习](#mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0)
    - [目标](#%E7%9B%AE%E6%A0%87)
    - [基本概念](#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5)
        - [事务及ACID特性](#%E4%BA%8B%E5%8A%A1%E5%8F%8Aacid%E7%89%B9%E6%80%A7)
        - [MySQL事务隔离级别](#mysql%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB)
        - [集群架构设计，主要遵从几个维度：](#%E9%9B%86%E7%BE%A4%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%BB%E8%A6%81%E9%81%B5%E4%BB%8E%E5%87%A0%E4%B8%AA%E7%BB%B4%E5%BA%A6)
    - [问题](#%E9%97%AE%E9%A2%98)
            - [MySQL中日志文件有几种](#mysql%E4%B8%AD%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E6%9C%89%E5%87%A0%E7%A7%8D)
    - [参考资料](#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99)

<!-- /TOC -->

## 目标

  熟悉 SQL 查询优化，事务和锁，MySQL 集群和高可用技术，分布式数据库架构等。尤其要注重于查询优化。
  
## 基本概念

  ### 事务及ACID特性
  
  
   事务是指作为单个逻辑工作单元执行的一系列操作，这些操作要么全做，要么全不做，是一个不可分割的工作单元。

   一个逻辑工作单元要成为事务，在关系型数据库管理系统中，必须满足 4 个特性，即所谓的 ACID：原子性、一致性、隔离性和持久性。

   * 一致性：事务开始之前和事务结束之后，数据库的完整性限制未被破坏。

   * 原子性：事务的所有操作，要么全部完成，要么全部不完成，不会结束在某个中间环节。

   * 持久性：事务完成之后，事务所做的修改进行持久化保存，不会丢失。

   * 隔离性：当多个事务并发访问数据库中的同一数据时，所表现出来的相互关系。
     
  
  ### MySQL事务隔离级别
  
   MySQL中InnoDB存储引擎 支持的隔离性有 4 种，隔离性从低到高分别为：读未提交、读提交、可重复读、可串行化。

   * 读未提交（RU，Read Uncommitted）。它能读到一个事务的中间过程，违背了 ACID 特性，存在脏读的问题，所以基本不会用到，可以忽略。

   * 读提交（RC，Read Committed）。它表示如果其他事务已经提交，那么我们就可以看到，这也是一种最普遍适用的级别。但由于一些历史原因，可能 RC 在生产环境中用的并不多。

   * 可重复读（RR，Repeatable Read），是目前被使用得最多的一种级别。其特点是有 Gap 锁、目前还是默认的级别、在这种级别下会经常发生死锁、低并发等问题。

   * 可串行化（serializable)，这种实现方式，其实已经并不是多版本了，又回到了单版本的状态，因为它所有的实现都是通过锁来实现的。
   
   
   ### 集群架构设计，主要遵从几个维度：
   
   1. 可用性
       
       站点高可用，冗余站点
       
       服务高可用，冗余服务
       
       数据高可用，冗余数据
   
   2. 扩展性
   
      读写扩展： 主从模式 + 读写分离
      
      存储扩展： 分库分表，写扩展
  
   
   隔离级别|脏读|不可重复读|幻读
   ------|-----|-------|---
   未提交读|可能|可能|可能
   已提交读|不可能|可能|可能
   可重复读|不可能|不可能|可能
   可串行化|不可能|不可能|不可能
  

## 问题

#### MySQL中日志文件有几种

   1. 重做日志（redo log)
   
   2. 回滚日志（undo log)
   
   3. 二进制日志（bin log）
 
   4. 错误日志 （err log)
    
   5. 慢查询日志（slow query log)
   
   6. 一般查询日志 （general log)
   
   7. 中继日志（relay log)

  
## 参考资料

   [MySQL教程](http://c.biancheng.net/view/7098.html)

   [MySQL高频面试题](https://juejin.cn/post/7126918029060866079)

   [二叉树、平衡二叉树、红黑树、B树、B+树介绍](https://juejin.cn/post/7032308521400188965)
  
