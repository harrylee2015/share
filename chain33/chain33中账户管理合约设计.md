# chain33中账户管理合约设计

## 前言
 
 央行发布的金融分布式账本安全技术规范，其中对账户管理这一模块有者严格的苛刻的要求，目前我们系统中原生的账户模型，满足不了这样健全的要求，因此需要额外
 设计一款账户管理合约，进行适配，以满足央行的技术规范。
  
  
## 需求


账户管理

功能|内容
----|----
账户创建|普通账户，管理员账户，其他有特殊权限的系统账户
账户授权|普通权限由注册机构注册时独立授权（不需要通过交易的形式注册？），特殊权限则需要全网共识节点达成共识后才能授权？（需要通过交易的形式进行链上注册）
凭证签发|需要进行实名制的check，检查通过后发送凭证，唯一性？
账户冻结和解冻|账户冻结由注册机构发起，冻结的账户不能交易
账户锁定和恢复|用于当私钥遗失，重置外部私钥的情况，需要有一定的锁定期限，在锁定期内不能转移账户下的资产
账户注销| 账户应设使用期限，过期账户将被注销，提供已注销账户的查询接口



可行性技术方案

功能|可行性技术方案
----|----
账户创建|普通账户，管理员账户，其他有特殊权限的系统账户（**账户创建都需要先在账户管理合约上面进行注册，链上注册，一个公钥地址绑定一个账户，账号可参考银行系统那样是16位的数字**）
账户授权|普通权限由注册机构注册时独立授权，特殊权限则需要全网共识节点达成共识后才能授权？（**特殊权限的地址需要所有共识节点的manager地址进行签名投票，超过2/3的节点授权，授权才会成功**）
凭证签发|需要进行实名制的check，检查通过后发送凭证，唯一性？（**这里是不是需要用到零知识证明？待研究**）
账户冻结和解冻|账户冻结由注册机构发起，冻结的账户不能交易（**可通过黑名单的方式，增添权限由管理员账户地址控制**）
账户锁定和恢复|用于当私钥遗失，重置外部私钥的情况，需要有一定的锁定期限，在锁定期内不能转移账户下的资产（**这里相当于公钥地址的重置，设计上可支持任何人对任何账户进行账号重置，但是有个前提，重置需要缴纳重置押金，以防恶意重置账户公钥，如果是恶意重置，则押金没收**）
账户注销| 账户应设使用期限，过期账户将被注销，提供已注销账户的查询接口 （**账户注册的时候会自动设置期限，比如有效期5年，到期了，可以申请延期服务，不然当做过期账户，进行注销处理**）


[金融分布式账户技术安全规范](http://www.cfstc.org/bzgk/gk/view/yulan.jsp?i_id=1855)




**表设计**

表名|主键|索引|用途|说明
 ---|---|---|---|---
 accountName表|accountName|status|记录账户信息|主键accountName是复合主键由{accountName}:{status}构成



  
  
