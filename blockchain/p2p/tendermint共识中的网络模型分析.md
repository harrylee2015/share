# tendermint共识中的网络模型分析

## tendermint网络
tendermint中共识模块网络复用了p2p网络，tendermint中的p2p网络严格上来讲，其实不算p2p，因为它本身不具备节点发现的功能，只是简单的拨号连接，只是在每次建立链接时，
会用本地节点的公私钥做一次鉴权，通过对双方随机生成的公钥信息生成的challenge进行签名，验签通过的话，双方建立安全链接通讯，通讯密钥则由本地随机生成的密钥对的私钥和远程节点传输过来的随机生成的公钥混合生成的一个sharesecret，通讯内容则是对消息体的封装，有block,tx,heat，等等类型，通过不同的goroutine进行处理。

![tendermint中通信模型](../../resources/secretcon.png)

理论上讲，如果节点不本地校验远程节点的public-key是否合法的话，会存在其他伪造节点发送一个错误的信息的安全风险。节点广播消息的话，会遍历自己本地缓存的其他节点信息，（一般时validator节点,集群初始化时，从配置文件中读取）然后依次发送。
